
-- ASSIGNMENT 2


-- 1. Create the following tables with appropriate constraints using SQL command.

-- A) Table Name : Member
-- Constraints: Member_Id-Primary Key, Member_Name-NOT NULL, Membership_type-IN(...), 
-- Max_books_allowed < 7, Penalty_amt maximum 1000

CREATE TABLE MEMBER_1073(
MEMBER_ID NUMBER(5),
MEMBER_NAME VARCHAR2(30) NOT NULL,
MEMBER_ADDRESS VARCHAR2(50),
ACC_OPEN_DATE DATE,
MEMBERSHIP_TYPE VARCHAR2(30),
FEES_PAID NUMBER(4),
MAX_BOOKS_ALLOWED NUMBER(2) CHECK(MAX_BOOKS_ALLOWED < 7) ,
PENALTY_AMOUNT NUMBER(7,2) CHECK (PENALTY_AMOUNT <= 1000)
);

DESC MEMBER_1073;

ALTER TABLE MEMBER_1073 ADD PRIMARY KEY(MEMBER_ID);
ALTER TABLE MEMBER_1073 ADD CHECK(MEMBERSHIP_TYPE IN('LIFETIME', 'ANNUAL', 'HALF_YEARLY', 'QUATERLY'));


-- B) Table Name : Books
-- Constraints: Book_No-Primary Key, Book_Name-NOT NULL, Category-IN(...)

CREATE TABLE BOOKS_1073(
BOOK_NO NUMBER(6),
BOOK_NAME VARCHAR2(30) ,
AUTHOR_NAME VARCHAR2(30),
COST NUMBER(7,2),
CATEGORY VARCHAR2(10) CHECK(CATEGORY IN('SCIENCE', 'DATABASE', 'SYSTEM', 'OTHERS')),
PRIMARY KEY(BOOK_NO)
);

DESC BOOKS_1073;

ALTER TABLE BOOKS_1073 MODIFY BOOK_NAME VARCHAR2(30) NOT NULL;


-- C) Table Name : Issue
-- Constraints: Lib_Issue_Id-Primary Key, Book_No-foreign key, Member_id-foreign key

CREATE TABLE ISSUE_1073(
LIB_ISSUE_ID NUMBER(10),
BOOK_NO NUMBER(6),
MEMBER_ID NUMBER(5),
ISSUE_DATE DATE,
RETURN_DATE DATE,
PRIMARY KEY(LIB_ISSUE_ID)
);

DESC ISSUE_1073;

ALTER TABLE ISSUE_1073 ADD FOREIGN KEY(BOOK_NO) REFERENCES BOOKS_1073(BOOK_NO);
ALTER TABLE ISSUE_1073 ADD FOREIGN KEY(MEMBER_ID) REFERENCES MEMBER_1073(MEMBER_ID);


-- 2. Insert the following data to the appropriate table using SQL command.

-- A) Inserting data into Table Name : Member
INSERT INTO MEMBER_1073 VALUES(1,'SAYANTAN SINHA', 'PUNE', '10-DEC-10', 'LIFETIME', 2000, 6, 50);
INSERT INTO MEMBER_1073 VALUES(2,'ABHIRUP SARKAR', 'KOLKATA', '19-JAN-11', 'ANNUAL', 1400, 3, 0);
INSERT INTO MEMBER_1073 VALUES(3,'RITESH BHUNIYA', 'GUJRAT', '20-FEB-11', 'QUATERLY', 350, 2, 100 );
INSERT INTO MEMBER_1073 VALUES(4,'PARESH SEN', 'TRIPURA', '21-MAR-11', 'HALF_YEARLY', 700, 1, 200);
INSERT INTO MEMBER_1073 VALUES(5,'SOHINI HALDAR', 'BIRBHUM', '11-APR-11', 'LIFETIME', 2000, 6, 10);
INSERT INTO MEMBER_1073 VALUES(6,'SUPARNA BISWAS', 'KOLKATA', '12-APR-11', 'HALF_YEARLY', 700, 1, 0);
INSERT INTO MEMBER_1073 VALUES(7,'SURANJAN BASU', 'PURULIA', '30-JUNE-11', 'ANNUAL', 1400, 3, 50);
INSERT INTO MEMBER_1073 VALUES(8,'ARPITA ROY', 'KOLKATA', '31-JULY-11', 'HALF_YEARLY', 700, 1, 0);

SELECT * FROM MEMBER_1073;


-- B) Inserting data into Table Name : Books
INSERT INTO BOOKS_1073 VALUES(101, 'LET US C', 'DENIS RITCHIE', 450, 'OTHERS');
INSERT INTO BOOKS_1073 VALUES(102, 'ORACLE COMPLETE REF', 'LONI', 550, 'DATABASE');
INSERT INTO BOOKS_1073 VALUES(103, 'VISUAL BASIC 10', 'BPB', 700, 'OTHERS');
INSERT INTO BOOKS_1073 VALUES(104, 'MASTERING SQL', 'LONI', 450, 'DATABASE');
INSERT INTO BOOKS_1073 VALUES(105, 'PL-SQL REF', 'SCOTT URMAN', 750, 'DATABASE');
INSERT INTO BOOKS_1073 VALUES(106, 'UNIX', 'SUMITAVA DAS', 300, 'SYSTEM');
INSERT INTO BOOKS_1073 VALUES(107, 'OPTICS', 'GHATAK', 600, 'SCIENCE');
INSERT INTO BOOKS_1073 VALUES(108, 'DATA STRUCTURE', 'G.S.BALUJA', 350, 'OTHERS');

SELECT * FROM BOOKS_1073;


-- C) Inserting data into Table Name : Issue
INSERT INTO ISSUE_1073 VALUES(7001, 101, 1, '10-JAN-11', NULL);
INSERT INTO ISSUE_1073 VALUES(7002, 102, 2, '25-JAN-11', NULL);
INSERT INTO ISSUE_1073 VALUES(7003, 104, 1, '1-FEB-11', NULL);
INSERT INTO ISSUE_1073 VALUES(7004, 104, 2, '15-MAR-11', NULL);
INSERT INTO ISSUE_1073 VALUES(7005, 101, 4, '04-APR-11', NULL);
INSERT INTO ISSUE_1073 VALUES(7006, 108, 5, '12-APR-11', NULL);
INSERT INTO ISSUE_1073 VALUES(7007, 101, 8, '1-AUG-11', NULL);

SELECT * FROM ISSUE_1073;